<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11) on Mon Jan 21 17:52:07 GMT 2019 -->
<title>com.sun.xml.ws.server (Metro Web Services Runtime non-OSGi Bundle 2.4.3 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2019-01-21">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../../../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="com.sun.xml.ws.server (Metro Web Services Runtime non-OSGi Bundle 2.4.3 API)";
        }
    }
    catch(err) {
    }
//-->
var pathtoroot = "../../../../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<main role="main">
<div class="header">
<h1 title="Package" class="title">Package&nbsp;com.sun.xml.ws.server</h1>
</div>
<div class="contentContainer">
<section role="region"><a id="package.description">
<!--   -->
</a>
<div class="block"><h1>JAX-WS 2.0.1 Server Runtime</h1>
 <P>This document describes the architecture of server side 
 JAX-WS 2.0.1 runtime. </p>

 <h3>JAX-WS 2.0.1 Server Runtime Sequence Diagram</h3>

 <img src='../../../../../jaxws/basic-server.seq.png'>
 


 <H3>Message Flow</H3>
 <P>A Web Service invocation starts with either the 
 <a href="../transport/http/servlet/WSServletDelegate.html" title="class in com.sun.xml.ws.transport.http.servlet"><code>WSServletDelegate</code></a>
 or the <code>ServerConnectionImpl</code>.
 Both of these classes find the appropriate <code>RuntimeEndpointInfo</code>
 and invokes the <code>Tie.handle</code>
 method. This method first creates a <code>MessageInfo</code>
 used to gather inforrmation about the message to be received. A
 <code>RuntimeContext</code>
 is then created with the MessageInfo and the <a href="../api/model/SEIModel.html" title="interface in com.sun.xml.ws.api.model"><code>RuntimeModel</code></a>
 retrieved from the RuntimeEndpointInfo. The RuntimeContext is then
 stored in the MessageInfo. The <code>EPTFactory</code>
 is retrieved from the <code>EPTFactoryFactoryBase</code>
 and also placed in the MessagInfo. A <code>MessageDispatcher</code>
 is then created and the receive method is invoked. There will be two
 types of MessageDispatchers for JAX-WS 2.0.1, SOAPMessageDispatcher
 (one for client and one for the server) and an XMLMessageDispatcher
 (one for the client and one for the server).</P>
 <P>The MessageDispatcher.receive method orchestrates the receiving of
 a Message. The SOAPMessageDispatcher first converts the MessageInfo
 to a SOAPMessage. The SOAPMessageDispatcher then does mustUnderstand
 processing followed by an invocation of any handlers. The SOAPMessage
 is then converted to an InternalMessage and stored in the
 MessageInfo. The converting of the SOAPMessage to an InternalMessage
 is done using the decoder retrieved from the EPTFactory that is
 contained in the MessageInfo. Once the SOAPMessage has been converted
 to an InternalMessage the endpoint implementation is invoked via
 reflection from the Method stored in the MessageInfo. The return
 value of the method call is then stored in the InternalMessage. An
 internalMessage is then created from the MessageInfo. The SOAPEncoder
 is retrieved from the EPTFactory stored in the MessageInfo. The
 SOAPEncoder.toSOAPMessage is then invoked to create a SOAPMessage
 from the InternalMessage. A WSConnection is then retrieved from the
 MessageInfo and the SOAPMessage is returned over that WSConnection.</P>
 <P><BR>
 </P>
 <H3>External Interactions</H3>
 <H4>SAAJ API</H4>
 <UL>
        <LI><P>JAX-WS creates SAAJ javax.xml.soap.SOAPMessage 
      from the HttpServletRequest.
        At present, JAX-WS reads all the bytes from the request stream and
        then creates SOAPMessage along with the HTTP headers.</P>
 </UL>
 <P>javax.xml.soap.MessageFactory(binding).createMessage(MimeHeaders, InputStream)</P>
 <UL>
        <LI><P>SOAPMessage parses the content from the stream including MIME
        data</P>
        <LI><P>com.sun.xml.ws.server.SOAPMessageDispatcher::checkHeadersPeekBody()</P>
        <P>SOAPMessage.getSOAPHeader() is used for mustUnderstand processing
        of headers. It further uses
        javax.xml.soap.SOAPHeader.examineMustUnderstandHeaderElements(role)</P>
        <P>SOAPMessage.getSOAPBody().getFistChild() is used for guessing the
        MEP of the request</P>
        <LI><P>com.sun.xml.ws.handler.HandlerChainCaller:insertFaultMessage()</P>
        <P>SOAPMessage.getSOAPPart().getEnvelope() and some other SAAJ calls
        are made to create a fault in the SOAPMessage</P>
        <LI><P>com.sun.xml.ws.handler.LogicalMessageImpl::getPayload()
        interacts with SAAJ to get body from SOAPMessage</P>
        <LI><P>com.sun.xml.ws.encoding.soap.SOAPEncoder.toSOAPMessage(com.sun.xml.ws.encoding.soap.internal.InternalMessage,
        SOAPMessage). There is a scenario where there is SOAPMessage and a
        logical handler sets payload as Source. To write to the stream,
        SOAPMessage.writeTo() is used but before that the body needs to be
        updated with logical handler' Source. Need to verify if this
        scenario is still happening since Handler.close() is changed to take
        MessageContext.</P>
        <LI><P>com.sun.xml.ws.handlerSOAPMessageContextImpl.getHeaders()
        uses SAAJ API to get headers.</P>
        <LI><P>SOAPMessage.writeTo() is used to write response. At present,
        it writes into byte[] and this byte[] is written to
        HttpServletResponse.</P>
 </UL>
 <H4>JAXB API</H4>
 <P>JAX-WS RI uses the JAXB API to marshall/unmarshall user created
 JAXB objects with user created <a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/bind/JAXBContext.html?is-external=true" title="class or interface in javax.xml.bind" class="externalLink"><code>JAXBContext</code></a>. 
 Handler, Dispatch in JAX-WS API provide ways for the user to specify his/her own
 JAXBContext. <code>JAXBTypeSerializer</code> class uses all these methods.</P>
 <UL>
        <LI><p><a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/bind/Marshaller.html?is-external=true#marshal(java.lang.Object,javax.xml.stream.XMLStreamWriter)" title="class or interface in javax.xml.bind" class="externalLink"><code>Marshaller.marshal(Object,XMLStreamWriter)</code></a></p>
        <LI><P><a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/bind/Marshaller.html?is-external=true#marshal(java.lang.Object,javax.xml.transform.Result)" title="class or interface in javax.xml.bind" class="externalLink"><code>Marshaller.marshal(Object, DomResult)</code></a></P>
        <LI><P><a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/bind/Unmarshaller.html?is-external=true#unmarshal(javax.xml.stream.XMLStreamReader)" title="class or interface in javax.xml.bind" class="externalLink"><code>Object Unmarshaller.unmarshal(XMLStreamReader)</code></a></P>
        <LI><P><a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/bind/Unmarshaller.html?is-external=true#unmarshal(javax.xml.transform.Source)" title="class or interface in javax.xml.bind" class="externalLink"><code>Object Unmarshaller.unmarshal(Source)</code></a></P>
 </UL>
 The following two JAXB classes are implemented by JAX-WS to enable/implement MTOM and XOP
 <UL>
      <LI><P><a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/bind/attachment/AttachmentMarshaller.html?is-external=true" title="class or interface in javax.xml.bind.attachment" class="externalLink"><code>AttachmentMarshaller</code></a></P>
      <LI><P><a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/bind/attachment/AttachmentUnmarshaller.html?is-external=true" title="class or interface in javax.xml.bind.attachment" class="externalLink"><code>AttachmentUnmarshaller</code></a></P>
 </UL>
 <H4>JAXB Runtime-API (private contract)</H4>
 <P>JAX-WS RI uses these private API for serialization/deserialization
 purposes. This private API is used to serialize/deserialize method
 parameters at the time of JAXBTypeSerializer class uses all
 these methods.</P>
 <UL>
        <LI><P><a href="../../bind/api/Bridge.html#marshal(com.sun.xml.bind.api.BridgeContext,T,javax.xml.stream.XMLStreamWriter)"><code>Bridge.marshal(BridgeContext, Object, XMLStreamWriter)</code></a></P>
        <LI><P><a href="../../bind/api/Bridge.html#marshal(com.sun.xml.bind.api.BridgeContext,T,org.w3c.dom.Node)"><code>Bridge.marshal(BridgeContext, Object, Node)</code></a></P>
        <LI><P><a href="../../bind/api/Bridge.html#unmarshal(com.sun.xml.bind.api.BridgeContext,javax.xml.stream.XMLStreamReader)"><code>Object Bridge.unmarshal(BridgeContext, XMLStreamReader)</code></a></P>
 </UL></div>
</section>
<ul class="blockList">
<li class="blockList">
<table class="typeSummary">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="EndpointAwareTube.html" title="interface in com.sun.xml.ws.server">EndpointAwareTube</a></th>
<td class="colLast">
<div class="block">Tubes that implement this interface will receive notification of the WSEndpoint
 holding the tubeline after successful endpoint creation.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="ServerPropertyConstants.html" title="interface in com.sun.xml.ws.server">ServerPropertyConstants</a></th>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="AbstractMultiInstanceResolver.html" title="class in com.sun.xml.ws.server">AbstractMultiInstanceResolver</a>&lt;T&gt;</th>
<td class="colLast">
<div class="block">Partial implementation of <a href="../api/server/InstanceResolver.html" title="class in com.sun.xml.ws.api.server"><code>InstanceResolver</code></a> with code
 to handle multiple instances per server.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="AbstractWebServiceContext.html" title="class in com.sun.xml.ws.server">AbstractWebServiceContext</a></th>
<td class="colLast">
<div class="block">Partial <a href="../api/server/WSWebServiceContext.html" title="interface in com.sun.xml.ws.api.server"><code>WSWebServiceContext</code></a> implementation.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="DefaultResourceInjector.html" title="class in com.sun.xml.ws.server">DefaultResourceInjector</a></th>
<td class="colLast">
<div class="block">Default <a href="../api/server/ResourceInjector.html" title="class in com.sun.xml.ws.api.server"><code>ResourceInjector</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="DraconianValidationErrorHandler.html" title="class in com.sun.xml.ws.server">DraconianValidationErrorHandler</a></th>
<td class="colLast">
<div class="block">Default <a href="../developer/ValidationErrorHandler.html" title="class in com.sun.xml.ws.developer"><code>ValidationErrorHandler</code></a> that just rethrows SAXException
 in case of errors.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="EndpointFactory.html" title="class in com.sun.xml.ws.server">EndpointFactory</a></th>
<td class="colLast">
<div class="block">Entry point to the JAX-WS RI server-side runtime.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="EndpointMessageContextImpl.html" title="class in com.sun.xml.ws.server">EndpointMessageContextImpl</a></th>
<td class="colLast">
<div class="block">Implements <a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/ws/WebServiceContext.html?is-external=true" title="class or interface in javax.xml.ws" class="externalLink"><code>WebServiceContext</code></a>'s <a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/ws/handler/MessageContext.html?is-external=true" title="class or interface in javax.xml.ws.handler" class="externalLink"><code>MessageContext</code></a> on top of <a href="../api/message/Packet.html" title="class in com.sun.xml.ws.api.message"><code>Packet</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="InvokerTube.html" title="class in com.sun.xml.ws.server">InvokerTube</a>&lt;T&gt;</th>
<td class="colLast">
<div class="block">Base code for <a href="provider/ProviderInvokerTube.html" title="class in com.sun.xml.ws.server.provider"><code>ProviderInvokerTube</code></a> and <a href="sei/SEIInvokerTube.html" title="class in com.sun.xml.ws.server.sei"><code>SEIInvokerTube</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="MonitorBase.html" title="class in com.sun.xml.ws.server">MonitorBase</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="MonitorRootService.html" title="class in com.sun.xml.ws.server">MonitorRootService</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="SDDocumentImpl.html" title="class in com.sun.xml.ws.server">SDDocumentImpl</a></th>
<td class="colLast">
<div class="block"><a href="../api/server/SDDocument.html" title="interface in com.sun.xml.ws.api.server"><code>SDDocument</code></a> implmentation.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="ServerSchemaValidationTube.html" title="class in com.sun.xml.ws.server">ServerSchemaValidationTube</a></th>
<td class="colLast">
<div class="block"><a href="../api/pipe/Tube.html" title="interface in com.sun.xml.ws.api.pipe"><code>Tube</code></a> that does the schema validation on the server side.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="ServiceDefinitionImpl.html" title="class in com.sun.xml.ws.server">ServiceDefinitionImpl</a></th>
<td class="colLast">
<div class="block"><a href="../api/server/ServiceDefinition.html" title="interface in com.sun.xml.ws.api.server"><code>ServiceDefinition</code></a> implementation.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="SingletonResolver.html" title="class in com.sun.xml.ws.server">SingletonResolver</a>&lt;T&gt;</th>
<td class="colLast">
<div class="block"><a href="../api/server/InstanceResolver.html" title="class in com.sun.xml.ws.api.server"><code>InstanceResolver</code></a> that always returns a single instance.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="StatefulInstanceResolver.html" title="class in com.sun.xml.ws.server">StatefulInstanceResolver</a>&lt;T&gt;</th>
<td class="colLast">
<div class="block"><a href="../api/server/InstanceResolver.html" title="class in com.sun.xml.ws.api.server"><code>InstanceResolver</code></a> that looks at JAX-WS cookie header to
 determine the instance to which a message will be routed.</div>
</td>
</tr>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="WSEndpointImpl.html" title="class in com.sun.xml.ws.server">WSEndpointImpl</a>&lt;T&gt;</th>
<td class="colLast">
<div class="block"><a href="../api/server/WSEndpoint.html" title="class in com.sun.xml.ws.api.server"><code>WSEndpoint</code></a> implementation.</div>
</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="WSEndpointMOMProxy.html" title="class in com.sun.xml.ws.server">WSEndpointMOMProxy</a></th>
<td class="colLast">
<div class="block"><a href="../../../../../org/glassfish/gmbal/ManagedObjectManager.html" title="interface in org.glassfish.gmbal"><code>ManagedObjectManager</code></a> proxy class for <a href="WSEndpointImpl.html" title="class in com.sun.xml.ws.server"><code>WSEndpointImpl</code></a> instances that could be used when Gmbal API calls
 need to be deferred.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary">
<caption><span>Exception Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Exception</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<th class="colFirst" scope="row"><a href="ServerRtException.html" title="class in com.sun.xml.ws.server">ServerRtException</a></th>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<th class="colFirst" scope="row"><a href="UnsupportedMediaException.html" title="class in com.sun.xml.ws.server">UnsupportedMediaException</a></th>
<td class="colLast">
<div class="block"><a href="../api/pipe/Codec.html" title="interface in com.sun.xml.ws.api.pipe"><code>Codec</code></a> throws this exception when it doesn't understand request message's
 Content-Type</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2005&#x2013;2019 <a href="http://www.oracle.com/">Oracle Corporation</a>. All rights reserved.</small></p>
</footer>
</body>
</html>
